"use strict";(self.webpackChunkrekalogika_docs=self.webpackChunkrekalogika_docs||[]).push([[2028],{7195:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>s,default:()=>u,frontMatter:()=>a,metadata:()=>r,toc:()=>c});var o=n(5893),i=n(1151);const a={title:"Pseudo Magic Method"},s=void 0,r={id:"domain-event/pseudo-magic-method",title:"Pseudo Magic Method",description:"The interface DomainEventEmitterInterface implemented by your entities and the",source:"@site/docs/domain-event/03-pseudo-magic-method.md",sourceDirName:"domain-event",slug:"/domain-event/pseudo-magic-method",permalink:"/domain-event/pseudo-magic-method",draft:!1,unlisted:!1,editUrl:"https://github.com/rekalogika/rekalogika-docs/edit/main/docs/domain-event/03-pseudo-magic-method.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"Pseudo Magic Method"},sidebar:"docs",previous:{title:"Basic Usage",permalink:"/domain-event/basic-usage"},next:{title:"Equatable Domain Events",permalink:"/domain-event/equatable"}},d={},c=[];function m(e){const t={code:"code",p:"p",pre:"pre",...(0,i.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(t.p,{children:["The interface ",(0,o.jsx)(t.code,{children:"DomainEventEmitterInterface"})," implemented by your entities and the\ncorresponding ",(0,o.jsx)(t.code,{children:"DomainEventEmitterTrait"})," add a pseudo magic method ",(0,o.jsx)(t.code,{children:"__remove()"}),"."]}),"\n",(0,o.jsxs)(t.p,{children:["The ",(0,o.jsx)(t.code,{children:"__remove()"})," method is called when the entity is about to be removed from\nthe database. You can use this method to record a 'removed' event."]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-php",children:"use Rekalogika\\Contracts\\DomainEvent\\DomainEventEmitterInterface;\nuse Rekalogika\\Contracts\\DomainEvent\\DomainEventEmitterTrait;\n\nclass Post implements DomainEventEmitterInterface\n{\n    use DomainEventEmitterTrait;\n\n    // ...\n\n    public function __remove()\n    {\n        $this->recordEvent(new PostRemoved($this->id));\n    }\n}\n"})}),"\n",(0,o.jsx)(t.p,{children:"This mechanism is devised because otherwise the entity cannot possibly know if\nit is being removed from the persistence layer."})]})}function u(e={}){const{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(m,{...e})}):m(e)}},1151:(e,t,n)=>{n.d(t,{Z:()=>r,a:()=>s});var o=n(7294);const i={},a=o.createContext(i);function s(e){const t=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),o.createElement(a.Provider,{value:t},e.children)}}}]);