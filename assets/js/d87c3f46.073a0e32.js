"use strict";(self.webpackChunkrekalogika_docs=self.webpackChunkrekalogika_docs||[]).push([[6470],{5682:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>x,frontMatter:()=>s,metadata:()=>d,toc:()=>h});var o=i(5893),t=i(1151),c=i(4996),l=i(9965);const s={title:"Interfaces"},r=void 0,d={id:"collections/interfaces",title:"Interfaces",description:"Interfaces provided by this package.",source:"@site/docs/collections/01-interfaces.md",sourceDirName:"collections",slug:"/collections/interfaces",permalink:"/collections/interfaces",draft:!1,unlisted:!1,editUrl:"https://github.com/rekalogika/rekalogika-docs/edit/main/docs/collections/01-interfaces.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Interfaces"},sidebar:"docs",previous:{title:"Introduction",permalink:"/collections/intro"},next:{title:"Implementations",permalink:"/collections/implementations/"}},a={},h=[{value:"<code>Recollection</code>",id:"recollection",level:2},{value:"<code>MinimalRecollection</code>",id:"minimalrecollection",level:2},{value:"<code>PageableRecollection</code>",id:"pageablerecollection",level:2},{value:"<code>Repository</code>",id:"repository",level:2},{value:"<code>MinimalRepository</code>",id:"minimalrepository",level:2}];function m(e){const n={admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",ul:"ul",...(0,t.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"Interfaces provided by this package."}),"\n",(0,o.jsx)(n.h2,{id:"recollection",children:(0,o.jsx)(n.code,{children:"Recollection"})}),"\n",(0,o.jsxs)(n.p,{children:["This package improves Doctrine Collections by extending the ",(0,o.jsx)(n.code,{children:"Collection"}),"\ninterface with additional methods. We call this new interface ",(0,o.jsx)(n.code,{children:"Recollection"}),"."]}),"\n",(0,o.jsx)(l.Z,{alt:"File classes",sources:{light:(0,c.ZP)("/diagrams/light/collections-recollection.svg"),dark:(0,c.ZP)("/diagrams/dark/collections-recollection.svg")},width:"100%"}),"\n",(0,o.jsxs)(n.p,{children:["In Doctrine ",(0,o.jsx)(n.code,{children:"Collection"}),", the following methods accept ",(0,o.jsx)(n.code,{children:"int|string"})," as the\nargument. In ",(0,o.jsx)(n.code,{children:"Recollection"}),", they are overridden, and these arguments are\nwidened to ",(0,o.jsx)(n.code,{children:"mixed"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"containsKey($key)"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"get($key)"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"remove($key)"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"set($key, $value)"})}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"The widening can remove some boilerplate code because the caller no longer\nneeds to perform type checking and conversion. It will be done by our classes\ninstead."}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"Recollection"})," adds these new methods:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"fetch($key)"}),": Similar to ",(0,o.jsx)(n.code,{children:"get($key)"}),", but throws an exception if the object\nis not found. If uncaught in a web application, this exception will\nautomatically be converted to a 404 response, which will further avoid\nboilerplate code."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"refreshCount()"}),": Recalculates the count of the collection. The exact behavior\ndepends on the provided counting strategy."]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["It also extends ",(0,o.jsx)(n.code,{children:"PageableInterface"})," which enables pagination support."]}),"\n",(0,o.jsx)(n.h2,{id:"minimalrecollection",children:(0,o.jsx)(n.code,{children:"MinimalRecollection"})}),"\n",(0,o.jsxs)(n.p,{children:["A minimal version of ",(0,o.jsx)(n.code,{children:"Recollection"})," that does not extend Doctrine ",(0,o.jsx)(n.code,{children:"Collection"}),"\nbut retains its safe methods with compatible signature. These are the methods\nthat should never trigger full initialization of an extra-lazy ",(0,o.jsx)(n.code,{children:"Collection"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"The idea is that if a collection becomes too large, you can simply switch to the\ncorresponding minimal version, run static analysis, and refactor the parts of\nyour code that still call non-safe methods."}),"\n",(0,o.jsx)(l.Z,{alt:"File classes",sources:{light:(0,c.ZP)("/diagrams/light/collections-minimal-recollection.svg"),dark:(0,c.ZP)("/diagrams/dark/collections-minimal-recollection.svg")},width:"100%"}),"\n",(0,o.jsx)(n.admonition,{type:"warning",children:(0,o.jsxs)(n.p,{children:["This interface will be updated if Doctrine adds new safe methods in the future.\nCurrently, the glaring omissions are the ",(0,o.jsx)(n.code,{children:"remove"})," and ",(0,o.jsx)(n.code,{children:"removeElement"})," methods.\nWe expect them to be added to Doctrine ORM eventually."]})}),"\n",(0,o.jsx)(n.h2,{id:"pageablerecollection",children:(0,o.jsx)(n.code,{children:"PageableRecollection"})}),"\n",(0,o.jsxs)(n.p,{children:["An extra-minimal version of ",(0,o.jsx)(n.code,{children:"Recollection"})," that only extends ",(0,o.jsx)(n.code,{children:"PageableInterface"}),"."]}),"\n",(0,o.jsx)(l.Z,{alt:"File classes",sources:{light:(0,c.ZP)("/diagrams/light/collections-pageable-recollection.svg"),dark:(0,c.ZP)("/diagrams/dark/collections-pageable-recollection.svg")},width:"100%"}),"\n",(0,o.jsx)(n.h2,{id:"repository",children:(0,o.jsx)(n.code,{children:"Repository"})}),"\n",(0,o.jsxs)(n.p,{children:["An alternative implementation of the repository pattern using the ",(0,o.jsx)(n.code,{children:"Recollection"}),"\ninterface. You can treat the repository like a regular collection."]}),"\n",(0,o.jsx)(l.Z,{alt:"File classes",sources:{light:(0,c.ZP)("/diagrams/light/collections-repository.svg"),dark:(0,c.ZP)("/diagrams/dark/collections-repository.svg")},width:"100%"}),"\n",(0,o.jsx)(n.p,{children:"It adds one new method:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"reference($key)"}),": Creates a reference, or a proxy object, to the object\nidentified by the given key. This method has the same function as the\n",(0,o.jsx)(n.code,{children:"EntityManagerInterface::getReference()"})," method."]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"minimalrepository",children:(0,o.jsx)(n.code,{children:"MinimalRepository"})}),"\n",(0,o.jsxs)(n.p,{children:["The minimal flavor of ",(0,o.jsx)(n.code,{children:"Repository"})," above."]}),"\n",(0,o.jsx)(l.Z,{alt:"File classes",sources:{light:(0,c.ZP)("/diagrams/light/collections-minimal-repository.svg"),dark:(0,c.ZP)("/diagrams/dark/collections-minimal-repository.svg")},width:"100%"}),"\n",(0,o.jsx)(n.p,{children:"It adds these new methods:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"reference($key)"}),": Creates a reference, or a proxy object, to the object\nidentified by the given key. This method has the same function as the\n",(0,o.jsx)(n.code,{children:"EntityManagerInterface::getReference()"})," method."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"remove($key)"}),": Removes the object identified by the given key."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"removeElement($element)"}),": Removes the given element from the repository."]}),"\n"]})]})}function x(e={}){const{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(m,{...e})}):m(e)}},1151:(e,n,i)=>{i.d(n,{Z:()=>s,a:()=>l});var o=i(7294);const t={},c=o.createContext(t);function l(e){const n=o.useContext(c);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),o.createElement(c.Provider,{value:n},e.children)}}}]);