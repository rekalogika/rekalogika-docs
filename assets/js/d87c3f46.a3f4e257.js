"use strict";(self.webpackChunkrekalogika_docs=self.webpackChunkrekalogika_docs||[]).push([[6470],{5682:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>r,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>l,toc:()=>a});var t=i(5893),s=i(1151);i(4996),i(9965);const o={title:"Interfaces"},c=void 0,l={id:"collections/interfaces",title:"Interfaces",description:"Interfaces provided by this package.",source:"@site/docs/collections/01-interfaces.md",sourceDirName:"collections",slug:"/collections/interfaces",permalink:"/collections/interfaces",draft:!1,unlisted:!1,editUrl:"https://github.com/rekalogika/rekalogika-docs/edit/main/docs/collections/01-interfaces.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Interfaces"},sidebar:"docs",previous:{title:"Introduction",permalink:"/collections/intro"},next:{title:"Implementations",permalink:"/collections/implementations/"}},r={},a=[{value:"<code>Recollection</code>",id:"recollection",level:2},{value:"<code>MinimalRecollection</code>",id:"minimalrecollection",level:2},{value:"<code>PageableRecollection</code>",id:"pageablerecollection",level:2},{value:"<code>Repository</code>",id:"repository",level:2},{value:"<code>MinimalRepository</code>",id:"minimalrepository",level:2}];function d(e){const n={admonition:"admonition",code:"code",h2:"h2",img:"img",li:"li",p:"p",ul:"ul",...(0,s.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"Interfaces provided by this package."}),"\n",(0,t.jsx)(n.h2,{id:"recollection",children:(0,t.jsx)(n.code,{children:"Recollection"})}),"\n",(0,t.jsxs)(n.p,{children:["This package enhances Doctrine Collections by extending the ",(0,t.jsx)(n.code,{children:"Collection"}),"\ninterface with additional methods. We call this new interface ",(0,t.jsx)(n.code,{children:"Recollection"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.img,{alt:"Recollection classes",src:i(3572).Z+"#light",width:"848",height:"1018"}),"\n",(0,t.jsx)(n.img,{alt:"Recollection classes",src:i(7170).Z+"#dark",width:"766",height:"1018"})]}),"\n",(0,t.jsxs)(n.p,{children:["In Doctrine ",(0,t.jsx)(n.code,{children:"Collection"}),", the following methods accept ",(0,t.jsx)(n.code,{children:"int|string"})," as the\nargument. In ",(0,t.jsx)(n.code,{children:"Recollection"}),", they are overridden, and these arguments are\nwidened to ",(0,t.jsx)(n.code,{children:"mixed"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"containsKey($key)"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"get($key)"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"remove($key)"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"set($key, $value)"})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"The widening can remove some boilerplate code because the caller no longer\nneeds to perform type checking and conversion. It will be done by our classes\ninstead."}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"Recollection"})," adds these new methods:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"fetch($key)"}),": Similar to ",(0,t.jsx)(n.code,{children:"get($key)"}),", but throws an exception if the object\nis not found. If uncaught in a web application, this exception will\nautomatically be converted to a 404 response, which will further avoid\nboilerplate code."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"refreshCount()"}),": Recalculates the count of the collection. The exact behavior\ndepends on the provided counting strategy."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["It also extends ",(0,t.jsx)(n.code,{children:"PageableInterface"})," which enables pagination support."]}),"\n",(0,t.jsx)(n.h2,{id:"minimalrecollection",children:(0,t.jsx)(n.code,{children:"MinimalRecollection"})}),"\n",(0,t.jsxs)(n.p,{children:["A minimal version of ",(0,t.jsx)(n.code,{children:"Recollection"})," that does not extend Doctrine ",(0,t.jsx)(n.code,{children:"Collection"}),"\nbut retains its safe methods with compatible signature. These are the methods\nthat should never trigger full initialization of an extra-lazy ",(0,t.jsx)(n.code,{children:"Collection"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"The idea is that if a collection becomes too large, you can simply switch to the\ncorresponding minimal version, run static analysis, and refactor the parts of\nyour code that still call non-safe methods."}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.img,{alt:"MinimalRecollection classes",src:i(3723).Z+"#light",width:"773",height:"922"}),"\n",(0,t.jsx)(n.img,{alt:"MinimalRecollection classes",src:i(1896).Z+"#dark",width:"766",height:"922"})]}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsxs)(n.p,{children:["This interface will be updated if Doctrine adds new safe methods in the future.\nCurrently, the glaring omissions are the ",(0,t.jsx)(n.code,{children:"remove"})," and ",(0,t.jsx)(n.code,{children:"removeElement"})," methods.\nWe expect them to be added to Doctrine ORM eventually."]})}),"\n",(0,t.jsx)(n.h2,{id:"pageablerecollection",children:(0,t.jsx)(n.code,{children:"PageableRecollection"})}),"\n",(0,t.jsxs)(n.p,{children:["An extra-minimal version of ",(0,t.jsx)(n.code,{children:"Recollection"})," that only extends ",(0,t.jsx)(n.code,{children:"PageableInterface"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.img,{alt:"PageableRecollection classes",src:i(9087).Z+"#light",width:"764",height:"886"}),"\n",(0,t.jsx)(n.img,{alt:"PageableRecollection classes",src:i(123).Z+"#dark",width:"774",height:"886"})]}),"\n",(0,t.jsx)(n.h2,{id:"repository",children:(0,t.jsx)(n.code,{children:"Repository"})}),"\n",(0,t.jsxs)(n.p,{children:["An alternative implementation of the repository pattern using the ",(0,t.jsx)(n.code,{children:"Recollection"}),"\ninterface. You can treat the repository like a regular collection."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.img,{alt:"Repository classes",src:i(3249).Z+"#light",width:"760",height:"874"}),"\n",(0,t.jsx)(n.img,{alt:"Repository classes",src:i(6039).Z+"#dark",width:"780",height:"874"})]}),"\n",(0,t.jsx)(n.p,{children:"It adds one new method:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"reference($key)"}),": Creates a reference, or a proxy object, to the object\nidentified by the given key. This method has the same function as the\n",(0,t.jsx)(n.code,{children:"EntityManagerInterface::getReference()"})," method."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"minimalrepository",children:(0,t.jsx)(n.code,{children:"MinimalRepository"})}),"\n",(0,t.jsxs)(n.p,{children:["The minimal flavor of ",(0,t.jsx)(n.code,{children:"Repository"})," above."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.img,{alt:"MinimalRepository classes",src:i(3269).Z+"#light",width:"760",height:"898"}),"\n",(0,t.jsx)(n.img,{alt:"MinimalRepository classes",src:i(6772).Z+"#dark",width:"805",height:"898"})]}),"\n",(0,t.jsx)(n.p,{children:"It adds these new methods:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"reference($key)"}),": Creates a reference, or a proxy object, to the object\nidentified by the given key. This method has the same function as the\n",(0,t.jsx)(n.code,{children:"EntityManagerInterface::getReference()"})," method."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"remove($key)"}),": Removes the object identified by the given key."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"removeElement($element)"}),": Removes the given element from the repository."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},1896:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/minimal-recollection.dark-4bf7ae6278b2f2dcb9cbe8f1bcd4bb94.svg"},3723:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/minimal-recollection.light-7aafe2436e07e968f88ed05b1ea4f373.svg"},6772:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/minimal-repository.dark-1cdc01d84d65bab89ada502a527751e6.svg"},3269:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/minimal-repository.light-155c3ef1742f06cfdd0079f19819b4e2.svg"},123:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/pageable-recollection.dark-02a627268ba6ea48ee7437b2451596e9.svg"},9087:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/pageable-recollection.light-539182cd906b564af55ddcf4377b59b1.svg"},7170:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/recollection.dark-6525417db8f89e7e93b6a935e32330e7.svg"},3572:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/recollection.light-5f8d9785d9483d051fa1dbce2a006026.svg"},6039:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/repository.dark-0ddd4b49b413c2e6e75a617816115c31.svg"},3249:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/repository.light-2a18b559e84526a41e3cec90169eb7f1.svg"},1151:(e,n,i)=>{i.d(n,{Z:()=>l,a:()=>c});var t=i(7294);const s={},o=t.createContext(s);function c(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);