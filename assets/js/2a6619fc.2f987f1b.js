"use strict";(self.webpackChunkrekalogika_docs=self.webpackChunkrekalogika_docs||[]).push([[3195],{3724:(e,i,n)=>{n.d(i,{A:()=>t});const t="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgaGVpZ2h0PSIyMzRweCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSIgc3R5bGU9IndpZHRoOjUzNHB4O2hlaWdodDoyMzRweDsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDUzNCAyMzQiIHdpZHRoPSI1MzRweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbGFzcyBBZ2dyZWdhdGVGdW5jdGlvbi0tPjxnIGlkPSJlbGVtX0FnZ3JlZ2F0ZUZ1bmN0aW9uIj48cmVjdCBjb2RlTGluZT0iMSIgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI2NC4yOTY5IiBpZD0iQWdncmVnYXRlRnVuY3Rpb24iIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjUyMC4yNDUxIiB4PSI3IiB5PSI3Ii8+PGVsbGlwc2UgY3g9IjE5Ni4wNzE4IiBjeT0iMjMiIGZpbGw9IiNCNEE3RTUiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48cGF0aCBkPSJNMTkxLjk5MzcsMTguNzY1NiBMMTkxLjk5MzcsMTYuNjA5NCBMMTk5LjM4NDMsMTYuNjA5NCBMMTk5LjM4NDMsMTguNzY1NiBMMTk2LjkxNTUsMTguNzY1NiBMMTk2LjkxNTUsMjYuODQzOCBMMTk5LjM4NDMsMjYuODQzOCBMMTk5LjM4NDMsMjkgTDE5MS45OTM3LDI5IEwxOTEuOTkzNywyNi44NDM4IEwxOTQuNDYyNCwyNi44NDM4IEwxOTQuNDYyNCwxOC43NjU2IEwxOTEuOTkzNywxOC43NjU2IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtc3R5bGU9Iml0YWxpYyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzMuNjAxNiIgeD0iMjE2LjU3MTgiIHk9IjI3Ljg0NjciPkFnZ3JlZ2F0ZUZ1bmN0aW9uPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjgiIHgyPSI1MjYuMjQ1MSIgeTE9IjM5IiB5Mj0iMzkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI4IiB4Mj0iNTI2LjI0NTEiIHkxPSI0NyIgeTI9IjQ3Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTA4LjI0NTEiIHg9IjEzIiB5PSI2My45OTUxIj5nZXRBZ2dyZWdhdGVUb1Jlc3VsdEV4cHJlc3Npb24oc3RyaW5nLCBTdW1tYXJ5UXVlcnlDb250ZXh0KTogc3RyaW5nPC90ZXh0PjwvZz48IS0tY2xhc3MgU3VtbWFyaXphYmxlQWdncmVnYXRlRnVuY3Rpb24tLT48ZyBpZD0iZWxlbV9TdW1tYXJpemFibGVBZ2dyZWdhdGVGdW5jdGlvbiI+PHJlY3QgY29kZUxpbmU9IjUiIGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iOTYuODkwNiIgaWQ9IlN1bW1hcml6YWJsZUFnZ3JlZ2F0ZUZ1bmN0aW9uIiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI0NTYuMzk3NSIgeD0iMzkiIHk9IjEzMSIvPjxlbGxpcHNlIGN4PSIxNDUuODU5NCIgY3k9IjE0NyIgZmlsbD0iI0I0QTdFNSIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjxwYXRoIGQ9Ik0xNDEuNzgxMywxNDIuNzY1NiBMMTQxLjc4MTMsMTQwLjYwOTQgTDE0OS4xNzE5LDE0MC42MDk0IEwxNDkuMTcxOSwxNDIuNzY1NiBMMTQ2LjcwMzEsMTQyLjc2NTYgTDE0Ni43MDMxLDE1MC44NDM4IEwxNDkuMTcxOSwxNTAuODQzOCBMMTQ5LjE3MTksMTUzIEwxNDEuNzgxMywxNTMgTDE0MS43ODEzLDE1MC44NDM4IEwxNDQuMjUsMTUwLjg0MzggTDE0NC4yNSwxNDIuNzY1NiBMMTQxLjc4MTMsMTQyLjc2NTYgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC1zdHlsZT0iaXRhbGljIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIzNC4xNzg3IiB4PSIxNjYuMzU5NCIgeT0iMTUxLjg0NjciPlN1bW1hcml6YWJsZUFnZ3JlZ2F0ZUZ1bmN0aW9uPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjQwIiB4Mj0iNDk0LjM5NzUiIHkxPSIxNjMiIHkyPSIxNjMiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI0MCIgeDI9IjQ5NC4zOTc1IiB5MT0iMTcxIiB5Mj0iMTcxIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDQ0LjM5NzUiIHg9IjQ1IiB5PSIxODcuOTk1MSI+Z2V0U291cmNlVG9BZ2dyZWdhdGVFeHByZXNzaW9uKFNvdXJjZVF1ZXJ5Q29udGV4dCk6IHN0cmluZzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIzNjMuNDUzMSIgeD0iNDUiIHk9IjIwNC4yOTIiPmdldEFnZ3JlZ2F0ZVRvQWdncmVnYXRlRXhwcmVzc2lvbihzdHJpbmcpOiBzdHJpbmc8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjE1LjU4NSIgeD0iNDUiIHk9IjIyMC41ODg5Ij5nZXRJbnZvbHZlZFByb3BlcnRpZXMoKTogYXJyYXk7PC90ZXh0PjwvZz48IS0tcmV2ZXJzZSBsaW5rIEFnZ3JlZ2F0ZUZ1bmN0aW9uIHRvIFN1bW1hcml6YWJsZUFnZ3JlZ2F0ZUZ1bmN0aW9uLS0+PGcgaWQ9ImxpbmtfQWdncmVnYXRlRnVuY3Rpb25fU3VtbWFyaXphYmxlQWdncmVnYXRlRnVuY3Rpb24iPjxwYXRoIGQ9Ik0yNjcsODkuMDggQzI2NywxMDYuNzEgMjY3LDExMS4xMyAyNjcsMTMwLjkzICIgZmlsbD0ibm9uZSIgaWQ9IkFnZ3JlZ2F0ZUZ1bmN0aW9uLWJhY2t0by1TdW1tYXJpemFibGVBZ2dyZWdhdGVGdW5jdGlvbiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PHBvbHlnb24gZmlsbD0ibm9uZSIgcG9pbnRzPSIyNjcsNzEuMDgsMjYxLDg5LjA4LDI3Myw4OS4wOCwyNjcsNzEuMDgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjwvZz48IS0tU1JDPVtWT3pEMmk4bTQ4TnRFS01NMmZ2MExyOEt0QWRyMGpEcTNBN2ZKOWJDbjJoVXRLMTFYOGdwVlRfeGNURzU2YTJXWi1td1I2cTNobEYyY1RnQTh1akwwS2U1RzU4Skk1Nmt1RDFrbEhWcWVCWkZ2M0dtc1FVbnZKcGdIeGhtNkxFRWtoaUZXWWFMUTk1SzBsY0xoTkZWV3VvZFozOU1ONUJsa2JwUklKS2x5cktxYVU0MUpTSHZRVjRYalVkVmQ5Z3BrQkJiV3RwRGNSSlZBLVJWXzRnT3U5ZGhHM1VFRHNvRm1XRUExYW9CbWUwOFoxbHBVV0MwXS0tPjwvZz48L3N2Zz4="},5828:(e,i,n)=>{n.d(i,{A:()=>t});const t="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgaGVpZ2h0PSIyMzRweCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSIgc3R5bGU9IndpZHRoOjUzNHB4O2hlaWdodDoyMzRweDsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDUzNCAyMzQiIHdpZHRoPSI1MzRweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbGFzcyBBZ2dyZWdhdGVGdW5jdGlvbi0tPjxnIGlkPSJlbGVtX0FnZ3JlZ2F0ZUZ1bmN0aW9uIj48cmVjdCBjb2RlTGluZT0iMSIgZmlsbD0iIzMxMzEzOSIgaGVpZ2h0PSI2NC4yOTY5IiBpZD0iQWdncmVnYXRlRnVuY3Rpb24iIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6I0U3RTdFNztzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjUyMC4yNDUxIiB4PSI3IiB5PSI3Ii8+PGVsbGlwc2UgY3g9IjE5Ni4wNzE4IiBjeT0iMjMiIGZpbGw9IiMzNTI4NjYiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiNFN0U3RTc7c3Ryb2tlLXdpZHRoOjEuMDsiLz48cGF0aCBkPSJNMTkxLjk5MzcsMTguNzY1NiBMMTkxLjk5MzcsMTYuNjA5NCBMMTk5LjM4NDMsMTYuNjA5NCBMMTk5LjM4NDMsMTguNzY1NiBMMTk2LjkxNTUsMTguNzY1NiBMMTk2LjkxNTUsMjYuODQzOCBMMTk5LjM4NDMsMjYuODQzOCBMMTk5LjM4NDMsMjkgTDE5MS45OTM3LDI5IEwxOTEuOTkzNywyNi44NDM4IEwxOTQuNDYyNCwyNi44NDM4IEwxOTQuNDYyNCwxOC43NjU2IEwxOTEuOTkzNywxOC43NjU2IFogIiBmaWxsPSIjRkZGRkZGIi8+PHRleHQgZmlsbD0iI0ZGRkZGRiIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtc3R5bGU9Iml0YWxpYyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzMuNjAxNiIgeD0iMjE2LjU3MTgiIHk9IjI3Ljg0NjciPkFnZ3JlZ2F0ZUZ1bmN0aW9uPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6I0U3RTdFNztzdHJva2Utd2lkdGg6MC41OyIgeDE9IjgiIHgyPSI1MjYuMjQ1MSIgeTE9IjM5IiB5Mj0iMzkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiNFN0U3RTc7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI4IiB4Mj0iNTI2LjI0NTEiIHkxPSI0NyIgeTI9IjQ3Ii8+PHRleHQgZmlsbD0iI0ZGRkZGRiIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTA4LjI0NTEiIHg9IjEzIiB5PSI2My45OTUxIj5nZXRBZ2dyZWdhdGVUb1Jlc3VsdEV4cHJlc3Npb24oc3RyaW5nLCBTdW1tYXJ5UXVlcnlDb250ZXh0KTogc3RyaW5nPC90ZXh0PjwvZz48IS0tY2xhc3MgU3VtbWFyaXphYmxlQWdncmVnYXRlRnVuY3Rpb24tLT48ZyBpZD0iZWxlbV9TdW1tYXJpemFibGVBZ2dyZWdhdGVGdW5jdGlvbiI+PHJlY3QgY29kZUxpbmU9IjUiIGZpbGw9IiMzMTMxMzkiIGhlaWdodD0iOTYuODkwNiIgaWQ9IlN1bW1hcml6YWJsZUFnZ3JlZ2F0ZUZ1bmN0aW9uIiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiNFN0U3RTc7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI0NTYuMzk3NSIgeD0iMzkiIHk9IjEzMSIvPjxlbGxpcHNlIGN4PSIxNDUuODU5NCIgY3k9IjE0NyIgZmlsbD0iIzM1Mjg2NiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6I0U3RTdFNztzdHJva2Utd2lkdGg6MS4wOyIvPjxwYXRoIGQ9Ik0xNDEuNzgxMywxNDIuNzY1NiBMMTQxLjc4MTMsMTQwLjYwOTQgTDE0OS4xNzE5LDE0MC42MDk0IEwxNDkuMTcxOSwxNDIuNzY1NiBMMTQ2LjcwMzEsMTQyLjc2NTYgTDE0Ni43MDMxLDE1MC44NDM4IEwxNDkuMTcxOSwxNTAuODQzOCBMMTQ5LjE3MTksMTUzIEwxNDEuNzgxMywxNTMgTDE0MS43ODEzLDE1MC44NDM4IEwxNDQuMjUsMTUwLjg0MzggTDE0NC4yNSwxNDIuNzY1NiBMMTQxLjc4MTMsMTQyLjc2NTYgWiAiIGZpbGw9IiNGRkZGRkYiLz48dGV4dCBmaWxsPSIjRkZGRkZGIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC1zdHlsZT0iaXRhbGljIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIzNC4xNzg3IiB4PSIxNjYuMzU5NCIgeT0iMTUxLjg0NjciPlN1bW1hcml6YWJsZUFnZ3JlZ2F0ZUZ1bmN0aW9uPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6I0U3RTdFNztzdHJva2Utd2lkdGg6MC41OyIgeDE9IjQwIiB4Mj0iNDk0LjM5NzUiIHkxPSIxNjMiIHkyPSIxNjMiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiNFN0U3RTc7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI0MCIgeDI9IjQ5NC4zOTc1IiB5MT0iMTcxIiB5Mj0iMTcxIi8+PHRleHQgZmlsbD0iI0ZGRkZGRiIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDQ0LjM5NzUiIHg9IjQ1IiB5PSIxODcuOTk1MSI+Z2V0U291cmNlVG9BZ2dyZWdhdGVFeHByZXNzaW9uKFNvdXJjZVF1ZXJ5Q29udGV4dCk6IHN0cmluZzwvdGV4dD48dGV4dCBmaWxsPSIjRkZGRkZGIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIzNjMuNDUzMSIgeD0iNDUiIHk9IjIwNC4yOTIiPmdldEFnZ3JlZ2F0ZVRvQWdncmVnYXRlRXhwcmVzc2lvbihzdHJpbmcpOiBzdHJpbmc8L3RleHQ+PHRleHQgZmlsbD0iI0ZGRkZGRiIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjE1LjU4NSIgeD0iNDUiIHk9IjIyMC41ODg5Ij5nZXRJbnZvbHZlZFByb3BlcnRpZXMoKTogYXJyYXk7PC90ZXh0PjwvZz48IS0tcmV2ZXJzZSBsaW5rIEFnZ3JlZ2F0ZUZ1bmN0aW9uIHRvIFN1bW1hcml6YWJsZUFnZ3JlZ2F0ZUZ1bmN0aW9uLS0+PGcgaWQ9ImxpbmtfQWdncmVnYXRlRnVuY3Rpb25fU3VtbWFyaXphYmxlQWdncmVnYXRlRnVuY3Rpb24iPjxwYXRoIGQ9Ik0yNjcsODkuMDggQzI2NywxMDYuNzEgMjY3LDExMS4xMyAyNjcsMTMwLjkzICIgZmlsbD0ibm9uZSIgaWQ9IkFnZ3JlZ2F0ZUZ1bmN0aW9uLWJhY2t0by1TdW1tYXJpemFibGVBZ2dyZWdhdGVGdW5jdGlvbiIgc3R5bGU9InN0cm9rZTojRTdFN0U3O3N0cm9rZS13aWR0aDoxLjA7Ii8+PHBvbHlnb24gZmlsbD0ibm9uZSIgcG9pbnRzPSIyNjcsNzEuMDgsMjYxLDg5LjA4LDI3Myw4OS4wOCwyNjcsNzEuMDgiIHN0eWxlPSJzdHJva2U6I0U3RTdFNztzdHJva2Utd2lkdGg6MS4wOyIvPjwvZz48IS0tU1JDPVtWT3pEMmk4bTQ4TnRFS01NMmZ2MExyOEt0QWRyMGpEcTNBN2ZKOWJDbjJoVXRLMTFYOGdwVlRfeGNURzU2YTJXWi1td1I2cTNobEYyY1RnQTh1akwwS2U1RzU4Skk1Nmt1RDFrbEhWcWVCWkZ2M0dtc1FVbnZKcGdIeGhtNkxFRWtoaUZXWWFMUTk1SzBsY0xoTkZWV3VvZFozOU1ONUJsa2JwUklKS2x5cktxYVU0MUpTSHZRVjRYalVkVmQ5Z3BrQkJiV3RwRGNSSlZBLVJWXzRnT3U5ZGhHM1VFRHNvRm1XRUExYW9CbWUwOFoxbHBVV0MwXS0tPjwvZz48L3N2Zz4="},8453:(e,i,n)=>{n.d(i,{R:()=>c,x:()=>l});var t=n(6540);const a={},I=t.createContext(a);function c(e){const i=t.useContext(I);return t.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function l(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:c(e.components),t.createElement(I.Provider,{value:i},e.children)}},8704:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>g,contentTitle:()=>l,default:()=>r,frontMatter:()=>c,metadata:()=>t,toc:()=>s});const t=JSON.parse('{"id":"analytics/aggregate-function/creating-aggregate-functions","title":"Creating Aggregate Functions","description":"To create an aggregate function, you need to create an implementation of","source":"@site/docs/analytics/06-aggregate-function/11-creating-aggregate-functions.md","sourceDirName":"analytics/06-aggregate-function","slug":"/analytics/aggregate-function/creating-aggregate-functions","permalink":"/analytics/aggregate-function/creating-aggregate-functions","draft":false,"unlisted":false,"editUrl":"https://github.com/rekalogika/rekalogika-docs/edit/main/docs/analytics/06-aggregate-function/11-creating-aggregate-functions.md","tags":[],"version":"current","sidebarPosition":11,"frontMatter":{"title":"Creating Aggregate Functions"},"sidebar":"docs","previous":{"title":"To-Many Joins Are Not Yet Supported","permalink":"/analytics/aggregate-function/to-many-joins"},"next":{"title":"Dimension Hierarchy","permalink":"/analytics/dimension-hierarchy/"}}');var a=n(4848),I=n(8453);const c={title:"Creating Aggregate Functions"},l=void 0,g={},s=[{value:"Interfaces",id:"interfaces",level:2},{value:"<code>AggregateFunction</code> Interface",id:"aggregatefunction-interface",level:3},{value:"<code>SummarizableAggregateFunction</code> Interface",id:"summarizableaggregatefunction-interface",level:3},{value:"Division Consideration",id:"division-consideration",level:2},{value:"User Value Transformer",id:"user-value-transformer",level:2}];function d(e){const i={code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,I.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i.p,{children:["To create an aggregate function, you need to create an implementation of\nthe ",(0,a.jsx)(i.code,{children:"AggregateFunction"})," or ",(0,a.jsx)(i.code,{children:"SummarizableAggregateFunction"})," interface."]}),"\n",(0,a.jsx)(i.h2,{id:"interfaces",children:"Interfaces"}),"\n",(0,a.jsxs)(i.p,{children:[(0,a.jsx)(i.img,{alt:"Aggregate function",src:n(3724).A+"#light",width:"534",height:"234"}),"\n",(0,a.jsx)(i.img,{alt:"Aggregate function",src:n(5828).A+"#dark",width:"534",height:"234"})]}),"\n",(0,a.jsxs)(i.h3,{id:"aggregatefunction-interface",children:[(0,a.jsx)(i.code,{children:"AggregateFunction"})," Interface"]}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-php",children:"namespace Rekalogika\\Analytics\\Contracts\\Summary;\n\nuse Rekalogika\\Analytics\\Contracts\\Context\\SummaryQueryContext;\n\ninterface AggregateFunction\n{\n    public function getAggregateToResultExpression(\n        string $inputExpression,\n        SummaryQueryContext $context,\n    ): string;\n}\n"})}),"\n",(0,a.jsxs)(i.p,{children:["Implement ",(0,a.jsx)(i.code,{children:"AggregateFunction"})," if the function does not read any data from the\nsource directly, but gets its input from other aggregate functions. Example: the\n",(0,a.jsx)(i.code,{children:"Average"})," aggregate function, it takes the sum and count from other aggregate\nfunctions and uses them to calculate the average."]}),"\n",(0,a.jsxs)(i.h3,{id:"summarizableaggregatefunction-interface",children:[(0,a.jsx)(i.code,{children:"SummarizableAggregateFunction"})," Interface"]}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-php",children:"namespace Rekalogika\\Analytics\\Contracts\\Summary;\n\nuse Rekalogika\\Analytics\\Contracts\\Context\\SourceQueryContext;\n\ninterface SummarizableAggregateFunction extends AggregateFunction\n{\n    public function getSourceToAggregateExpression(\n        SourceQueryContext $context,\n    ): string;\n\n    public function getAggregateToAggregateExpression(\n        string $inputExpression,\n    ): string;\n\n    /**\n     * @return list<string>\n     */\n    public function getInvolvedProperties(): array;\n}\n"})}),"\n",(0,a.jsxs)(i.p,{children:["Implement ",(0,a.jsx)(i.code,{children:"SummarizableAggregateFunction"})," if the function reads data from the\nsource entity. You need to supply these logics using DQL expressions:"]}),"\n",(0,a.jsxs)(i.ul,{children:["\n",(0,a.jsxs)(i.li,{children:[(0,a.jsx)(i.code,{children:"getSourceToAggregateExpression()"})," - How to transform a field from multiple\nsource entities into a single aggregate value."]}),"\n",(0,a.jsxs)(i.li,{children:[(0,a.jsx)(i.code,{children:"getAggregateToAggregateExpression()"})," - How to combine multiple\naggregate values into a single aggregate value."]}),"\n",(0,a.jsxs)(i.li,{children:[(0,a.jsx)(i.code,{children:"getAggregateToResultExpression()"})," - How to transform an aggregate value\ninto the final result value."]}),"\n"]}),"\n",(0,a.jsx)(i.h2,{id:"division-consideration",children:"Division Consideration"}),"\n",(0,a.jsxs)(i.p,{children:["When creating an aggregate function that involves division, you should\nconsider the case when the denominator is zero. To avoid division by zero, use\nthe DQL expression ",(0,a.jsx)(i.code,{children:"NULLIF(<denominator>, 0)"}),". This will return ",(0,a.jsx)(i.code,{children:"NULL"})," if the\ndenominator is zero, which is a safe way to handle division in DQL."]}),"\n",(0,a.jsx)(i.h2,{id:"user-value-transformer",children:"User Value Transformer"}),"\n",(0,a.jsxs)(i.p,{children:["The aggregate function can provide a way to transform the raw result value (as\nreturned by Doctrine) into a user-friendly object. This is done by implementing\nthe ",(0,a.jsx)(i.code,{children:"UserValueTransformer"})," interface. The following is an example done for the\n",(0,a.jsx)(i.code,{children:"CountDistinct"})," aggregate function."]}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-php",children:"use Rekalogika\\Analytics\\Contracts\\Context\\ValueTransformerContext;\nuse Rekalogika\\Analytics\\Contracts\\Summary\\SummarizableAggregateFunction;\nuse Rekalogika\\Analytics\\Contracts\\Summary\\UserValueTransformer;\n\n/**\n * @implements UserValueTransformer<int,ApproximateCount>\n */\nfinal readonly class CountDistinct implements\n    SummarizableAggregateFunction,\n    UserValueTransformer\n{\n    // ...\n\n    #[\\Override]\n    public function getUserValue(\n        mixed $rawValue,\n        ValueTransformerContext $context,\n    ): mixed {\n        if ($rawValue === null) {\n            return null;\n        }\n\n        return new ApproximateCount($rawValue);\n    }\n}\n"})}),"\n",(0,a.jsx)(i.p,{children:"Then in the summary class, the user will be able to do something like this:"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-php",children:"use Doctrine\\ORM\\Mapping as ORM;\nuse Doctrine\\ORM\\Types\\Types;\nuse Rekalogika\\Analytics\\Core\\Metadata as Analytics;\nuse Rekalogika\\Analytics\\Core\\Entity\\BaseSummary;\n\n#[ORM\\Entity()]\n#[Analytics\\Summary(\n    sourceClass: Order::class,\n)]\nclass OrderSummary extends BaseSummary\n{\n    #[ORM\\Column(type: 'rekalogika_hll')]\n    #[Analytics\\Measure(\n        function: new CountDistinct(new IdentifierValue('customer')),\n    )]\n    private ?int $uniqueCustomers = null;\n\n    public function getUniqueCustomers(): ?ApproximateCount\n    {\n        // highlight-start\n        return $this->getContext()->getUserValue(\n            property: 'uniqueCustomers',\n            class: ApproximateCount::class,\n        );\n        // highlight-end\n    }\n}\n"})})]})}function r(e={}){const{wrapper:i}={...(0,I.R)(),...e.components};return i?(0,a.jsx)(i,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}}}]);