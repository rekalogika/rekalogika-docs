"use strict";(self.webpackChunkrekalogika_docs=self.webpackChunkrekalogika_docs||[]).push([[1533],{2382:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>i,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"doctrine-collections-decorator/cookbook/decorating-members","title":"Decorating Member Objects","description":"We can use a collection decorator to dynamically decorate the members of the","source":"@site/docs/doctrine-collections-decorator/cookbook/14-decorating-members.md","sourceDirName":"doctrine-collections-decorator/cookbook","slug":"/doctrine-collections-decorator/cookbook/decorating-members","permalink":"/doctrine-collections-decorator/cookbook/decorating-members","draft":false,"unlisted":false,"editUrl":"https://github.com/rekalogika/rekalogika-docs/edit/main/docs/doctrine-collections-decorator/cookbook/14-decorating-members.md","tags":[],"version":"current","sidebarPosition":14,"frontMatter":{"title":"Decorating Member Objects"},"sidebar":"docs","previous":{"title":"Selectable Abstraction","permalink":"/doctrine-collections-decorator/cookbook/selectable-abstraction"},"next":{"title":"Loading Prevention in Extra Lazy Collections","permalink":"/doctrine-collections-decorator/cookbook/extra-lazy-load-prevention"}}');var s=o(4848),c=o(8453);const r={title:"Decorating Member Objects"},a=void 0,i={},l=[{value:"<code>BusinessContract</code> Entity &amp; Superclass",id:"businesscontract-entity--superclass",level:2},{value:"Decorator for <code>BusinessContract</code>",id:"decorator-for-businesscontract",level:2},{value:"Decorator for the <code>BusinessContract</code> Collection",id:"decorator-for-the-businesscontract-collection",level:2},{value:"Usage in the <code>PartnerCompany</code> Object",id:"usage-in-the-partnercompany-object",level:2},{value:"Class Diagram",id:"class-diagram",level:2}];function d(e){const n={code:"code",h2:"h2",img:"img",p:"p",pre:"pre",...(0,c.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"We can use a collection decorator to dynamically decorate the members of the\ncollection on the fly."}),"\n",(0,s.jsxs)(n.p,{children:["In this example, we will be using an example of a one-to-many association\nbetween ",(0,s.jsx)(n.code,{children:"PartnerCompany"})," and ",(0,s.jsx)(n.code,{children:"BusinessContract"})," entities. The ",(0,s.jsx)(n.code,{children:"PartnerCompany"}),"\nentity has a collection of ",(0,s.jsx)(n.code,{children:"BusinessContract"})," entities."]}),"\n",(0,s.jsxs)(n.h2,{id:"businesscontract-entity--superclass",children:[(0,s.jsx)(n.code,{children:"BusinessContract"})," Entity & Superclass"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"use Doctrine\\ORM\\Mapping as ORM;\n\ninterface BusinessContractInterface {\n    // ...\n}\n\n#[ORM\\Entity()]\nclass BusinessContract implements BusinessContractInterface {\n    // ...\n}\n"})}),"\n",(0,s.jsxs)(n.h2,{id:"decorator-for-businesscontract",children:["Decorator for ",(0,s.jsx)(n.code,{children:"BusinessContract"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"class BusinessContractDecorator implements BusinessContractInterface {\n    public function __construct(private BusinessContractInterface $wrapped)\n    {\n    }\n\n    // ...\n}\n"})}),"\n",(0,s.jsxs)(n.h2,{id:"decorator-for-the-businesscontract-collection",children:["Decorator for the ",(0,s.jsx)(n.code,{children:"BusinessContract"})," Collection"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"use Doctrine\\Common\\Collections\\Collection;\nuse Doctrine\\Common\\Collections\\Criteria;\nuse Doctrine\\Common\\Collections\\Selectable;\nuse Rekalogika\\Collections\\Decorator\\Decorator\\CollectionDecorator;\n\n/**\n * @extends CollectionDecorator<array-key,BusinessContractInterface>\n */\nclass BusinessContractCollectionDecorator extends CollectionDecorator\n{\n    #[\\Override]\n    public function get(string|int $key): BusinessContractInterface\n    {\n        return new BusinessContractDecorator(\n            $this->getWrapped()->get($key)\n        );\n    }\n\n    #[\\Override]\n    public function getIterator(): \\Traversable\n    {\n        foreach ($this->getWrapped() as $key => $value) {\n            yield $key => new BusinessContractDecorator($value);\n        }\n    }\n\n    // We should override all the other methods that returns\n    // BusinessContractInterface, but for conciseness, we skip them here.\n}\n"})}),"\n",(0,s.jsxs)(n.h2,{id:"usage-in-the-partnercompany-object",children:["Usage in the ",(0,s.jsx)(n.code,{children:"PartnerCompany"})," Object"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"use Doctrine\\Common\\Collections\\ArrayCollection;\nuse Doctrine\\Common\\Collections\\Collection;\nuse Doctrine\\ORM\\Mapping as ORM;\n\n#[ORM\\Entity()]\nclass PartnerCompany\n{\n    /**\n     * @var Collection<array-key,BusinessContractInterface>\n     */\n    #[ORM\\OneToMany(targetEntity: BusinessContract::class)]\n    private Collection $businessContracts;\n\n    public function __construct()\n    {\n        $this->businessContracts = new ArrayCollection();\n    }\n\n    public function getBusinessContracts(): BusinessContractCollectionDecorator\n    {\n        return new BusinessContractCollectionDecorator($this->businessContracts);\n    }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"class-diagram",children:"Class Diagram"}),"\n",(0,s.jsx)(n.p,{children:"Now for a bird's-eye view of our classes."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.img,{alt:"Decorating members",src:o(9561).A+"#light",width:"839",height:"525"}),"\n",(0,s.jsx)(n.img,{alt:"Decorating members",src:o(3123).A+"#dark",width:"839",height:"525"})]})]})}function u(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},3123:(e,n,o)=>{o.d(n,{A:()=>t});const t=o.p+"assets/images/decorating-members.dark-c80ee25d516eb192e455f4a9b3c5a7c3.svg"},9561:(e,n,o)=>{o.d(n,{A:()=>t});const t=o.p+"assets/images/decorating-members.light-a5057357a69908648131808019d14eee.svg"},8453:(e,n,o)=>{o.d(n,{R:()=>r,x:()=>a});var t=o(6540);const s={},c=t.createContext(s);function r(e){const n=t.useContext(c);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(c.Provider,{value:n},e.children)}}}]);