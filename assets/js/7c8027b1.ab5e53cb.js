"use strict";(self.webpackChunkrekalogika_docs=self.webpackChunkrekalogika_docs||[]).push([[2783],{6331:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"analytics/user-interface/pivot-table","title":"Pivot Table & Regular Table","description":"To transform the query result into a table or a pivot table, you can use the","source":"@site/docs/analytics/11-user-interface/01-pivot-table.md","sourceDirName":"analytics/11-user-interface","slug":"/analytics/user-interface/pivot-table","permalink":"/analytics/user-interface/pivot-table","draft":false,"unlisted":false,"editUrl":"https://github.com/rekalogika/rekalogika-docs/edit/main/docs/analytics/11-user-interface/01-pivot-table.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Pivot Table & Regular Table"},"sidebar":"docs","previous":{"title":"User Interface","permalink":"/analytics/user-interface/"},"next":{"title":"Chart","permalink":"/analytics/user-interface/chart"}}');var r=t(4848),l=t(8453);const i={title:"Pivot Table & Regular Table"},o=void 0,s={},d=[{value:"Rendering to a Pivot Table or Regular Table",id:"rendering-to-a-pivot-table-or-regular-table",level:2},{value:"Exception Handling",id:"exception-handling",level:2},{value:"Changing the Theme",id:"changing-the-theme",level:2},{value:"Creating a Custom Theme",id:"creating-a-custom-theme",level:2}];function c(e){const n={code:"code",h2:"h2",p:"p",pre:"pre",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["To transform the query result into a table or a pivot table, you can use the\n",(0,r.jsx)(n.code,{children:"TableRenderer"})," service."]}),"\n",(0,r.jsx)(n.h2,{id:"rendering-to-a-pivot-table-or-regular-table",children:"Rendering to a Pivot Table or Regular Table"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"render()"})," method will return an HTML string that you can use in your view.\nIf the query does not have a hierarchical ordering, then it is not possible to\nrender to a pivot table. Instead, ",(0,r.jsx)(n.code,{children:"render"})," will fall back to a regular table."]}),"\n",(0,r.jsxs)(n.p,{children:["There are also the ",(0,r.jsx)(n.code,{children:"renderPivotTable()"})," and ",(0,r.jsx)(n.code,{children:"renderTable()"})," methods, which allow\nyou to explicitly render the result to a pivot table or regular table,\nrespectively, without autodetection done by ",(0,r.jsx)(n.code,{children:"render()"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"use Rekalogika\\Analytics\\Contracts\\SummaryManager;\nuse Rekalogika\\Analytics\\Frontend\\Exception\\AnalyticsFrontendException;\nuse Rekalogika\\Analytics\\Frontend\\Html\\TableRenderer;\nuse Symfony\\Contracts\\Translation\\TranslatorInterface;\n\n/** @var SummaryManager $summaryManager */\n/** @var TableRenderer $tableRenderer */\n/** @var TranslatorInterface $translator */\n\n$result = $summaryManager\n    ->createQuery()\n    // ...\n    ->getResult();\n\n// renderPivotTable() returns a pivot table\n$table = $tableRenderer->renderPivotTable(\n    result: $result,\n    pivotedDimensions: ['@values']\n);\n\n// renderTable() returns a regular table\n$table = $tableRenderer->renderTable(\n    result: $result,\n);\n\n// render() autodetects whether to render a pivot table or a regular table\n$table = $tableRenderer->render(\n    result: $result,\n    pivotedDimensions: ['@values']\n);\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"pivotedDimensions"})," parameter is an array of dimension names that you want\nto pivot into columns. ",(0,r.jsx)(n.code,{children:"@values"})," is a special dimension value that represents\nthe measures of the query."]}),"\n",(0,r.jsx)(n.h2,{id:"exception-handling",children:"Exception Handling"}),"\n",(0,r.jsxs)(n.p,{children:["By default, any error message will be rendered in the resulting HTML. If you\nwant to handle exceptions yourself, you can add the argument ",(0,r.jsx)(n.code,{children:"throwException: true"})," to the ",(0,r.jsx)(n.code,{children:"render()"}),", ",(0,r.jsx)(n.code,{children:"renderPivotTable()"}),", or ",(0,r.jsx)(n.code,{children:"renderTable()"})," methods."]}),"\n",(0,r.jsxs)(n.p,{children:["The rendering methods may throw an ",(0,r.jsx)(n.code,{children:"AnalyticsFrontendException"})," if the rendering\nfails. ",(0,r.jsx)(n.code,{children:"AnalyticsFrontendException"})," is guaranteed to have a user-friendly,\ntranslatable error message that can be safely displayed to the user. Other\nexceptions are not guaranteed to have a user-friendly message, and should not be\ndisplayed to the user directly."]}),"\n",(0,r.jsx)(n.h2,{id:"changing-the-theme",children:"Changing the Theme"}),"\n",(0,r.jsx)(n.p,{children:"By default, these methods will use a plain table output. To have a themed\ntable, you can change the default theme in the configuration:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",metastring:'title="config/packages/rekalogika_analytics.yaml"',children:'rekalogika_analytics:\n    table_theme: "@RekalogikaAnalyticsFrontend/bootstrap_5_renderer.html.twig"\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Alternatively, the methods above also accept the ",(0,r.jsx)(n.code,{children:"theme"})," parameter, which allows\nyou to specify a different theme for the table:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"use Rekalogika\\Analytics\\Frontend\\Html\\TableRenderer;\n\n/** @var TableRenderer $tableRenderer */\n\n$table = $tableRenderer->render(\n    result: $result,\n    // highlight-next-line\n    theme: '@RekalogikaAnalyticsFrontend/bootstrap_5_renderer.html.twig'\n);\n"})}),"\n",(0,r.jsx)(n.h2,{id:"creating-a-custom-theme",children:"Creating a Custom Theme"}),"\n",(0,r.jsxs)(n.p,{children:["You can create a custom theme by extending the\n",(0,r.jsx)(n.code,{children:"RekalogikaAnalyticsFrontend/renderer.html.twig"})," file. Read\n",(0,r.jsx)(n.code,{children:"bootstrap_5_renderer.html.twig"})," for an example of how to do this."]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>o});var a=t(6540);const r={},l=a.createContext(r);function i(e){const n=a.useContext(l);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),a.createElement(l.Provider,{value:n},e.children)}}}]);