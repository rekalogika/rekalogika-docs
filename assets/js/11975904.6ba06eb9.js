"use strict";(self.webpackChunkrekalogika_docs=self.webpackChunkrekalogika_docs||[]).push([[8331],{5180:(d,e,n)=>{n.r(e),n.d(e,{assets:()=>c,contentTitle:()=>i,default:()=>j,frontMatter:()=>l,metadata:()=>t,toc:()=>h});const t=JSON.parse('{"id":"pivot-table/quick-start","title":"Quick Start","description":"First, we need to procure the data. For maximum functionality, the result should","source":"@site/docs/pivot-table/01-quick-start.md","sourceDirName":"pivot-table","slug":"/pivot-table/quick-start","permalink":"/pivot-table/quick-start","draft":false,"unlisted":false,"editUrl":"https://github.com/rekalogika/rekalogika-docs/edit/main/docs/pivot-table/01-quick-start.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Quick Start"},"sidebar":"docs","previous":{"title":"Introduction","permalink":"/pivot-table/intro"},"next":{"title":"Usage","permalink":"/pivot-table/usage"}}');var s=n(4848),r=n(8453);const l={title:"Quick Start"},i=void 0,c={},h=[];function x(d){const e={code:"code",p:"p",pre:"pre",...(0,r.R)(),...d.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.p,{children:"First, we need to procure the data. For maximum functionality, the result should\nbe cubed. The following is an example SQL query for PostgreSQL."}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- name, country, and month are the dimensions, count and sum are the measures.\n-- grouping is used to identify if a dimension is subtotaled.\nSELECT name,\n    country,\n    month,\n    COUNT(*) AS count,\n    SUM(price) AS sum,\n    GROUPING(name, country, month) AS grouping\nFROM items\nGROUP BY DISTINCT CUBE(name, country, month)\n-- ORDER BY clause determines the order of the dimensions in the output\nORDER BY name,\n    country,\n    month\n"})}),"\n",(0,s.jsx)(e.p,{children:"Then, use whatever means to execute the query and fetch the result as an array\nof array. We can create a pivot table as follows:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-php",children:"use Rekalogika\\PivotTable\\ArrayTable\\ArrayTableFactory;\nuse Rekalogika\\PivotTable\\PivotTableTransformer;\nuse Rekalogika\\PivotTable\\TableRenderer\\BasicTableRenderer;\n\n// Create a data cube from the result set\n$cube = ArrayTableFactory::createCube(\n    input: $data,\n    // must be in the same order as the GROUPING() function in the SQL query:\n    dimensionFields: ['name', 'country', 'month'], \n    measureFields: ['count', 'sum'],\n    groupingField: 'grouping',\n    legends: [\n        '@values' => 'Values',\n        'name' => 'Item Name',\n        'country' => 'Country', \n        'month' => 'Month',\n        'count' => 'Count',\n        'sum' => 'Sum',\n    ],\n    subtotalLabels: [\n        'name' => 'All Names',\n        'country' => 'All Countries',\n        'month' => 'All Months',\n    ],\n);\n\n// Transform the cube to HTML table object\n$htmlTable = PivotTableTransformer::transform(\n    cube: $cube,\n    rows: ['country', 'month'],    // Rows\n    columns: ['@values', 'name'],       // Columns  \n    measures: ['count', 'sum'],         // Which measures to include\n    // Add subtotals for these dimensions\n    subtotals: [\n      'name' => true,\n      'country' => true,\n    ],\n);\n\n// Render to HTML string\n$html = BasicTableRenderer::render($htmlTable);\necho $html;\n"})}),"\n",(0,s.jsx)(e.p,{children:"The resulting HTML table will look like this:"}),"\n",(0,s.jsxs)("table",{children:[(0,s.jsxs)("thead",{children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{rowspan:"3",children:"Country"}),(0,s.jsx)("th",{rowspan:"3",children:"Month"}),(0,s.jsx)("th",{colspan:"4",children:"Count"}),(0,s.jsx)("th",{colspan:"4",children:"Sum"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{colspan:"4",children:"Name"}),(0,s.jsx)("th",{colspan:"4",children:"Name"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"itemA"}),(0,s.jsx)("td",{children:"itemB"}),(0,s.jsx)("td",{children:"itemC"}),(0,s.jsx)("td",{children:"All names"}),(0,s.jsx)("td",{children:"itemA"}),(0,s.jsx)("td",{children:"itemB"}),(0,s.jsx)("td",{children:"itemC"}),(0,s.jsx)("td",{children:"All names"})]})]}),(0,s.jsxs)("tbody",{children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{rowspan:"6",children:"CN"}),(0,s.jsx)("td",{children:"202501"}),(0,s.jsx)("td",{children:"4"}),(0,s.jsx)("td",{children:"1"}),(0,s.jsx)("td",{children:"5"}),(0,s.jsx)("td",{children:"10"}),(0,s.jsx)("td",{children:"2586.07"}),(0,s.jsx)("td",{children:"434.22"}),(0,s.jsx)("td",{children:"3375.71"}),(0,s.jsx)("td",{children:"6396"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"202502"}),(0,s.jsx)("td",{children:"null"}),(0,s.jsx)("td",{children:"5"}),(0,s.jsx)("td",{children:"1"}),(0,s.jsx)("td",{children:"6"}),(0,s.jsx)("td",{children:"null"}),(0,s.jsx)("td",{children:"2575.55"}),(0,s.jsx)("td",{children:"337.29"}),(0,s.jsx)("td",{children:"2912.84"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"202503"}),(0,s.jsx)("td",{children:"4"}),(0,s.jsx)("td",{children:"5"}),(0,s.jsx)("td",{children:"3"}),(0,s.jsx)("td",{children:"12"}),(0,s.jsx)("td",{children:"2823.54"}),(0,s.jsx)("td",{children:"2849.01"}),(0,s.jsx)("td",{children:"1488.2"}),(0,s.jsx)("td",{children:"7160.75"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"202504"}),(0,s.jsx)("td",{children:"3"}),(0,s.jsx)("td",{children:"null"}),(0,s.jsx)("td",{children:"null"}),(0,s.jsx)("td",{children:"3"}),(0,s.jsx)("td",{children:"1301.73"}),(0,s.jsx)("td",{children:"null"}),(0,s.jsx)("td",{children:"null"}),(0,s.jsx)("td",{children:"1301.73"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"202505"}),(0,s.jsx)("td",{children:"null"}),(0,s.jsx)("td",{children:"3"}),(0,s.jsx)("td",{children:"null"}),(0,s.jsx)("td",{children:"3"}),(0,s.jsx)("td",{children:"null"}),(0,s.jsx)("td",{children:"1845.78"}),(0,s.jsx)("td",{children:"null"}),(0,s.jsx)("td",{children:"1845.78"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"All months"}),(0,s.jsx)("td",{children:"11"}),(0,s.jsx)("td",{children:"14"}),(0,s.jsx)("td",{children:"9"}),(0,s.jsx)("td",{children:"34"}),(0,s.jsx)("td",{children:"6711.34"}),(0,s.jsx)("td",{children:"7704.56"}),(0,s.jsx)("td",{children:"5201.2"}),(0,s.jsx)("td",{children:"19617.1"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{rowspan:"6",children:"JP"}),(0,s.jsx)("td",{children:"202501"}),(0,s.jsx)("td",{children:"1"}),(0,s.jsx)("td",{children:"3"}),(0,s.jsx)("td",{children:"4"}),(0,s.jsx)("td",{children:"8"}),(0,s.jsx)("td",{children:"107.51"}),(0,s.jsx)("td",{children:"1410.79"}),(0,s.jsx)("td",{children:"1765.04"}),(0,s.jsx)("td",{children:"3283.34"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"202502"}),(0,s.jsx)("td",{children:"5"}),(0,s.jsx)("td",{children:"1"}),(0,s.jsx)("td",{children:"5"}),(0,s.jsx)("td",{children:"11"}),(0,s.jsx)("td",{children:"3119.07"}),(0,s.jsx)("td",{children:"393.39"}),(0,s.jsx)("td",{children:"2081.02"}),(0,s.jsx)("td",{children:"5593.48"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"202503"}),(0,s.jsx)("td",{children:"null"}),(0,s.jsx)("td",{children:"3"}),(0,s.jsx)("td",{children:"5"}),(0,s.jsx)("td",{children:"8"}),(0,s.jsx)("td",{children:"null"}),(0,s.jsx)("td",{children:"1966"}),(0,s.jsx)("td",{children:"3656.16"}),(0,s.jsx)("td",{children:"5622.16"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"202504"}),(0,s.jsx)("td",{children:"3"}),(0,s.jsx)("td",{children:"5"}),(0,s.jsx)("td",{children:"2"}),(0,s.jsx)("td",{children:"10"}),(0,s.jsx)("td",{children:"2014.32"}),(0,s.jsx)("td",{children:"2348.93"}),(0,s.jsx)("td",{children:"1042.42"}),(0,s.jsx)("td",{children:"5405.67"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"202505"}),(0,s.jsx)("td",{children:"null"}),(0,s.jsx)("td",{children:"1"}),(0,s.jsx)("td",{children:"1"}),(0,s.jsx)("td",{children:"2"}),(0,s.jsx)("td",{children:"null"}),(0,s.jsx)("td",{children:"973.91"}),(0,s.jsx)("td",{children:"725.8"}),(0,s.jsx)("td",{children:"1699.71"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"All months"}),(0,s.jsx)("td",{children:"9"}),(0,s.jsx)("td",{children:"13"}),(0,s.jsx)("td",{children:"17"}),(0,s.jsx)("td",{children:"39"}),(0,s.jsx)("td",{children:"5240.9"}),(0,s.jsx)("td",{children:"7093.02"}),(0,s.jsx)("td",{children:"9270.44"}),(0,s.jsx)("td",{children:"21604.36"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{rowspan:"6",children:"KR"}),(0,s.jsx)("td",{children:"202501"}),(0,s.jsx)("td",{children:"null"}),(0,s.jsx)("td",{children:"null"}),(0,s.jsx)("td",{children:"2"}),(0,s.jsx)("td",{children:"2"}),(0,s.jsx)("td",{children:"null"}),(0,s.jsx)("td",{children:"null"}),(0,s.jsx)("td",{children:"1134.36"}),(0,s.jsx)("td",{children:"1134.36"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"202502"}),(0,s.jsx)("td",{children:"5"}),(0,s.jsx)("td",{children:"3"}),(0,s.jsx)("td",{children:"1"}),(0,s.jsx)("td",{children:"9"}),(0,s.jsx)("td",{children:"1668.59"}),(0,s.jsx)("td",{children:"2239.52"}),(0,s.jsx)("td",{children:"240.94"}),(0,s.jsx)("td",{children:"4149.05"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"202503"}),(0,s.jsx)("td",{children:"3"}),(0,s.jsx)("td",{children:"5"}),(0,s.jsx)("td",{children:"4"}),(0,s.jsx)("td",{children:"12"}),(0,s.jsx)("td",{children:"1891.44"}),(0,s.jsx)("td",{children:"1781.15"}),(0,s.jsx)("td",{children:"2191.78"}),(0,s.jsx)("td",{children:"5864.37"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"202504"}),(0,s.jsx)("td",{children:"1"}),(0,s.jsx)("td",{children:"5"}),(0,s.jsx)("td",{children:"2"}),(0,s.jsx)("td",{children:"8"}),(0,s.jsx)("td",{children:"855.94"}),(0,s.jsx)("td",{children:"2641.75"}),(0,s.jsx)("td",{children:"1274.36"}),(0,s.jsx)("td",{children:"4772.05"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"202505"}),(0,s.jsx)("td",{children:"5"}),(0,s.jsx)("td",{children:"2"}),(0,s.jsx)("td",{children:"null"}),(0,s.jsx)("td",{children:"7"}),(0,s.jsx)("td",{children:"2231.2"}),(0,s.jsx)("td",{children:"458.68"}),(0,s.jsx)("td",{children:"null"}),(0,s.jsx)("td",{children:"2689.88"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"All months"}),(0,s.jsx)("td",{children:"14"}),(0,s.jsx)("td",{children:"15"}),(0,s.jsx)("td",{children:"9"}),(0,s.jsx)("td",{children:"38"}),(0,s.jsx)("td",{children:"6647.17"}),(0,s.jsx)("td",{children:"7121.1"}),(0,s.jsx)("td",{children:"4841.44"}),(0,s.jsx)("td",{children:"18609.71"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{rowspan:"6",children:"All countries"}),(0,s.jsx)("td",{children:"202501"}),(0,s.jsx)("td",{children:"5"}),(0,s.jsx)("td",{children:"4"}),(0,s.jsx)("td",{children:"11"}),(0,s.jsx)("td",{children:"20"}),(0,s.jsx)("td",{children:"2693.58"}),(0,s.jsx)("td",{children:"1845.01"}),(0,s.jsx)("td",{children:"6275.11"}),(0,s.jsx)("td",{children:"10813.7"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"202502"}),(0,s.jsx)("td",{children:"10"}),(0,s.jsx)("td",{children:"9"}),(0,s.jsx)("td",{children:"7"}),(0,s.jsx)("td",{children:"26"}),(0,s.jsx)("td",{children:"4787.66"}),(0,s.jsx)("td",{children:"5208.46"}),(0,s.jsx)("td",{children:"2659.25"}),(0,s.jsx)("td",{children:"12655.37"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"202503"}),(0,s.jsx)("td",{children:"7"}),(0,s.jsx)("td",{children:"13"}),(0,s.jsx)("td",{children:"12"}),(0,s.jsx)("td",{children:"32"}),(0,s.jsx)("td",{children:"4714.98"}),(0,s.jsx)("td",{children:"6596.16"}),(0,s.jsx)("td",{children:"7336.14"}),(0,s.jsx)("td",{children:"18647.28"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"202504"}),(0,s.jsx)("td",{children:"7"}),(0,s.jsx)("td",{children:"10"}),(0,s.jsx)("td",{children:"4"}),(0,s.jsx)("td",{children:"21"}),(0,s.jsx)("td",{children:"4171.99"}),(0,s.jsx)("td",{children:"4990.68"}),(0,s.jsx)("td",{children:"2316.78"}),(0,s.jsx)("td",{children:"11479.45"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"202505"}),(0,s.jsx)("td",{children:"5"}),(0,s.jsx)("td",{children:"6"}),(0,s.jsx)("td",{children:"1"}),(0,s.jsx)("td",{children:"12"}),(0,s.jsx)("td",{children:"2231.2"}),(0,s.jsx)("td",{children:"3278.37"}),(0,s.jsx)("td",{children:"725.8"}),(0,s.jsx)("td",{children:"6235.37"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"All months"}),(0,s.jsx)("td",{children:"34"}),(0,s.jsx)("td",{children:"42"}),(0,s.jsx)("td",{children:"35"}),(0,s.jsx)("td",{children:"111"}),(0,s.jsx)("td",{children:"18599.41"}),(0,s.jsx)("td",{children:"21918.68"}),(0,s.jsx)("td",{children:"19313.08"}),(0,s.jsx)("td",{children:"59831.17"})]})]})]})]})}function j(d={}){const{wrapper:e}={...(0,r.R)(),...d.components};return e?(0,s.jsx)(e,{...d,children:(0,s.jsx)(x,{...d})}):x(d)}},8453:(d,e,n)=>{n.d(e,{R:()=>l,x:()=>i});var t=n(6540);const s={},r=t.createContext(s);function l(d){const e=t.useContext(r);return t.useMemo(function(){return"function"==typeof d?d(e):{...e,...d}},[e,d])}function i(d){let e;return e=d.disableParentContext?"function"==typeof d.components?d.components(s):d.components||s:l(d.components),t.createElement(r.Provider,{value:e},d.children)}}}]);